{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport MainCarousel from '../src/components/MainCarousel/MainCarousel';\nimport Seo from '../src/components/Seo/Seo';\nimport MainCollectionsSamples from '../src/components/MainCollectionsSamples/MainCollectionsSamples';\nimport MainStreetStyleSamples from '../src/components/MainStreetStyleSamples/MainStreetStyleSamples';\nimport Celebrities from '../src/components/Celebrities/Celebrities';\nimport { getCockpitCollection, getCockpitCollections } from '../src/utils/getCockpitData';\nimport { SEO_ITEMS } from '../src/constants/seoItems';\n\nconst IndexPage = ({\n  carousel,\n  goods,\n  celebrities,\n  streetStyle,\n  locale\n}) => /*#__PURE__*/_jsxs(\"main\", {\n  className: \"main-page\",\n  children: [/*#__PURE__*/_jsx(Seo, {\n    title: SEO_ITEMS[locale].indexPage.title,\n    description: SEO_ITEMS[locale].indexPage.title,\n    breadcrumbs: [{\n      title: SEO_ITEMS[locale].indexPage.breadcrumbName,\n      link: SEO_ITEMS[locale].indexPage.link\n    }],\n    lang: locale,\n    path: process.env.NEXT_PUBLIC_SITE_URL + SEO_ITEMS[locale].indexPage.link\n  }), /*#__PURE__*/_jsx(MainCarousel, {\n    carousel: carousel\n  }), /*#__PURE__*/_jsx(MainCollectionsSamples, {\n    goods: goods\n  }), /*#__PURE__*/_jsx(MainStreetStyleSamples, {\n    photos: streetStyle\n  }), /*#__PURE__*/_jsx(Celebrities, {\n    celebrities: celebrities\n  })]\n});\n\nexport const getServerSideProps = async ({\n  locale,\n  defaultLocale\n}) => {\n  const collectionNames = ['mainCarousel', 'Celebrities'];\n  const [cockpitDataCarousel, cockpitDataCelebrities] = await getCockpitCollections(collectionNames);\n  const filter = `filter[link]=/street-style&populate=1`;\n  const cockpitDataRunways = await getCockpitCollection('Runways', filter);\n  const getGoods = getCockpitCollection.bind(undefined, 'Goods');\n  const collectionFiter = 'filter[onMain]=true&simple=true';\n  const collection = await getCockpitCollection('Collections', collectionFiter);\n  const goodsFilter = `limit=3${collection.length ? `&filter[collection._id]=${collection[0]._id}` : ''}&sort[_created]=-1`;\n  const cockpitDataGoods = await getGoods(goodsFilter);\n\n  if (cockpitDataGoods.total === 0) {\n    const goodsFilter = `populate=1&sort[collection._id]=-1&sort[_created]=-1&limit=3`;\n    let cockpitDataGoods = await getGoods(goodsFilter);\n\n    if (cockpitDataGoods.total === 0) {\n      const goodsFilter = 'limit=3&sort[_created]=-1';\n      cockpitDataGoods = await getGoods(goodsFilter);\n    }\n  }\n\n  const curRunway = cockpitDataRunways.total ? cockpitDataRunways.entries[0] : null;\n  const carousel = cockpitDataCarousel.entries.map(el => {\n    return {\n      title: el.title,\n      link: el.link,\n      image: el.image\n    };\n  });\n  const goods = cockpitDataGoods.entries.map(el => {\n    return {\n      title: locale === defaultLocale ? el.title : el.title_en,\n      link: el.link,\n      description: locale === defaultLocale ? el.description : el.description_en,\n      previewImage: el.previewImage,\n      secondImage: el.secondImage,\n      collectionId: el.collection._id,\n      _modified: el._modified,\n      _id: el._id\n    };\n  });\n  const celebrities = cockpitDataCelebrities.entries.map(el => {\n    return {\n      name: locale === defaultLocale ? el.name : el.name_en,\n      proffesion: locale === defaultLocale ? el.proffesion : el.proffesion_en,\n      photo: el.photo\n    };\n  }).reverse().slice(0, 3);\n  return {\n    props: {\n      carousel,\n      goods,\n      celebrities: celebrities,\n      streetStyle: curRunway.photos.reverse().slice(0, 3).map(photo => photo.path),\n      locale\n    }\n  };\n};\nexport default IndexPage;","map":null,"metadata":{},"sourceType":"module"}