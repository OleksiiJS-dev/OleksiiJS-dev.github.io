{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport Fuse from 'fuse.js';\nimport useCockpit from '../../hooks/useCockpit';\nimport GoodsSearchItem from '../Goods/GoodsSearchItem';\nimport { TRANSLATE } from '../../constants/languages';\n\nvar SearchInput = function SearchInput(_ref) {\n  var close = _ref.close;\n\n  var _useRouter = useRouter(),\n      locale = _useRouter.locale,\n      defaultLocale = _useRouter.defaultLocale;\n\n  var _useState = useState(''),\n      searchValue = _useState[0],\n      setSearchValue = _useState[1];\n\n  var _useState2 = useState([]),\n      foundGoods = _useState2[0],\n      setFoundGoods = _useState2[1];\n\n  var _useCockpit = useCockpit(false),\n      goods = _useCockpit.data;\n\n  var goodsList = goods === null || goods === void 0 ? void 0 : goods.entries;\n  var options = {\n    includeScore: true,\n    keys: ['title', 'title_en']\n  };\n  var fuse = new Fuse(goodsList, options);\n  useEffect(function () {\n    if (goodsList) setFoundGoods(fuse.search(searchValue).map(function (result) {\n      return result.item;\n    }));\n  }, [searchValue, goodsList]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"search-input-container\",\n    children: [/*#__PURE__*/_jsx(\"input\", {\n      type: \"text\",\n      className: \"search-input\",\n      value: searchValue,\n      placeholder: TRANSLATE[locale].search,\n      onChange: function onChange(e) {\n        return setSearchValue(e.target.value);\n      }\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      role: \"presentation\",\n      onClick: function onClick() {\n        setSearchValue('');\n        close && close();\n      },\n      className: \"search-result-container\",\n      children: [searchValue && !foundGoods.length && /*#__PURE__*/_jsxs(\"p\", {\n        className: \"not-found\",\n        children: [TRANSLATE[locale].goodsNotFound[0], \" \\\"\".concat(searchValue, \"\\\" \"), TRANSLATE[locale].goodsNotFound[1]]\n      }), foundGoods.map(function (_ref2) {\n        var _id = _ref2._id,\n            previewImage = _ref2.previewImage,\n            title = _ref2.title,\n            title_en = _ref2.title_en,\n            link = _ref2.link,\n            stockPrice = _ref2.stockPrice,\n            price = _ref2.price;\n        return /*#__PURE__*/_jsx(GoodsSearchItem, {\n          photo: previewImage.path,\n          title: locale === defaultLocale ? title : title_en,\n          link: link,\n          price: stockPrice ? stockPrice : price\n        }, _id);\n      })]\n    })]\n  });\n};\n\nexport default SearchInput;","map":null,"metadata":{},"sourceType":"module"}