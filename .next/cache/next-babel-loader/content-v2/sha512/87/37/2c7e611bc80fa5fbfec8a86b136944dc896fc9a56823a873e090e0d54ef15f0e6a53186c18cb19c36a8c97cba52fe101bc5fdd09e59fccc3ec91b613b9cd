{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\archivegit\\\\blind-blind\\\\pages\\\\index.tsx\";\nimport MainCarousel from '../src/components/MainCarousel/MainCarousel';\nimport Seo from '../src/components/Seo/Seo';\nimport MainCollectionsSamples from '../src/components/MainCollectionsSamples/MainCollectionsSamples';\nimport MainStreetStyleSamples from '../src/components/MainStreetStyleSamples/MainStreetStyleSamples';\nimport Celebrities from '../src/components/Celebrities/Celebrities';\nimport { getCockpitCollection, getCockpitCollections } from '../src/utils/getCockpitData';\nimport { SEO_ITEMS } from '../src/constants/seoItems';\n\nconst IndexPage = ({\n  carousel,\n  goods,\n  celebrities,\n  streetStyle,\n  locale\n}) => /*#__PURE__*/_jsxDEV(\"main\", {\n  className: \"main-page\",\n  children: [/*#__PURE__*/_jsxDEV(Seo, {\n    title: SEO_ITEMS[locale].indexPage.title,\n    description: SEO_ITEMS[locale].indexPage.title,\n    breadcrumbs: [{\n      title: SEO_ITEMS[locale].indexPage.breadcrumbName,\n      link: SEO_ITEMS[locale].indexPage.link\n    }],\n    lang: locale,\n    path: process.env.NEXT_PUBLIC_SITE_URL + SEO_ITEMS[locale].indexPage.link\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(MainCarousel, {\n    carousel: carousel\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(MainCollectionsSamples, {\n    goods: goods\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(MainStreetStyleSamples, {\n    photos: streetStyle\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(Celebrities, {\n    celebrities: celebrities\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 31,\n  columnNumber: 3\n}, this);\n\nexport const getServerSideProps = async ({\n  locale,\n  defaultLocale\n}) => {\n  const collectionNames = ['mainCarousel', 'Celebrities'];\n  const [cockpitDataCarousel, cockpitDataCelebrities] = await getCockpitCollections(collectionNames);\n  const filter = `filter[link]=/street-style&populate=1`;\n  const cockpitDataRunways = await getCockpitCollection('Runways', filter);\n  const getGoods = getCockpitCollection.bind(undefined, 'Goods');\n  const collectionFiter = 'filter[onMain]=true&simple=true';\n  const collection = await getCockpitCollection('Collections', collectionFiter);\n  const goodsFilter = `limit=3${collection.length ? `&filter[collection._id]=${collection[0]._id}` : ''}&sort[_created]=-1`;\n  const cockpitDataGoods = await getGoods(goodsFilter);\n\n  if (cockpitDataGoods.total === 0) {\n    const goodsFilter = `populate=1&sort[collection._id]=-1&sort[_created]=-1&limit=3`;\n    let cockpitDataGoods = await getGoods(goodsFilter);\n\n    if (cockpitDataGoods.total === 0) {\n      const goodsFilter = 'limit=3&sort[_created]=-1';\n      cockpitDataGoods = await getGoods(goodsFilter);\n    }\n  }\n\n  const curRunway = cockpitDataRunways.total ? cockpitDataRunways.entries[0] : null;\n  const carousel = cockpitDataCarousel.entries.map(el => {\n    return {\n      title: el.title,\n      link: el.link,\n      image: el.image\n    };\n  });\n  const goods = cockpitDataGoods.entries.map(el => {\n    return {\n      title: locale === defaultLocale ? el.title : el.title_en,\n      link: el.link,\n      description: locale === defaultLocale ? el.description : el.description_en,\n      previewImage: el.previewImage,\n      secondImage: el.secondImage,\n      collectionId: el.collection._id,\n      _modified: el._modified,\n      _id: el._id\n    };\n  });\n  const celebrities = cockpitDataCelebrities.entries.map(el => {\n    return {\n      name: locale === defaultLocale ? el.name : el.name_en,\n      proffesion: locale === defaultLocale ? el.proffesion : el.proffesion_en,\n      photo: el.photo\n    };\n  }).reverse().slice(0, 3);\n  return {\n    props: {\n      carousel,\n      goods,\n      celebrities: celebrities,\n      streetStyle: curRunway.photos.reverse().slice(0, 3).map(photo => photo.path),\n      locale\n    }\n  };\n};\nexport default IndexPage;","map":{"version":3,"sources":["D:/archivegit/blind-blind/pages/index.tsx"],"names":["MainCarousel","Seo","MainCollectionsSamples","MainStreetStyleSamples","Celebrities","getCockpitCollection","getCockpitCollections","SEO_ITEMS","IndexPage","carousel","goods","celebrities","streetStyle","locale","indexPage","title","breadcrumbName","link","process","env","NEXT_PUBLIC_SITE_URL","getServerSideProps","defaultLocale","collectionNames","cockpitDataCarousel","cockpitDataCelebrities","filter","cockpitDataRunways","getGoods","bind","undefined","collectionFiter","collection","goodsFilter","length","_id","cockpitDataGoods","total","curRunway","entries","map","el","image","title_en","description","description_en","previewImage","secondImage","collectionId","_modified","name","name_en","proffesion","proffesion_en","photo","reverse","slice","props","photos","path"],"mappings":"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","sourcesContent":["import { NextPage, GetServerSideProps } from 'next';\r\n\r\nimport MainCarousel from '../src/components/MainCarousel/MainCarousel';\r\nimport Seo from '../src/components/Seo/Seo';\r\nimport MainCollectionsSamples from '../src/components/MainCollectionsSamples/MainCollectionsSamples';\r\nimport MainStreetStyleSamples from '../src/components/MainStreetStyleSamples/MainStreetStyleSamples';\r\nimport Celebrities from '../src/components/Celebrities/Celebrities';\r\n\r\nimport { IIndexPageProps } from '../src/pagesTypes';\r\nimport {\r\n  ICockpitCarousel,\r\n  ICockpitCelebrityRaw,\r\n  ICockpitGoodsRaw,\r\n  ICockpitRunwaysAndLookbooksRaw,\r\n} from '../src/cockpitTypes';\r\n\r\nimport {\r\n  getCockpitCollection,\r\n  getCockpitCollections,\r\n} from '../src/utils/getCockpitData';\r\n\r\nimport { SEO_ITEMS } from '../src/constants/seoItems';\r\n\r\nconst IndexPage: NextPage<IIndexPageProps> = ({\r\n  carousel,\r\n  goods,\r\n  celebrities,\r\n  streetStyle,\r\n  locale,\r\n}) => (\r\n  <main className=\"main-page\">\r\n    <Seo\r\n      title={SEO_ITEMS[locale].indexPage.title}\r\n      description={SEO_ITEMS[locale].indexPage.title}\r\n      breadcrumbs={[\r\n        {\r\n          title: SEO_ITEMS[locale].indexPage.breadcrumbName,\r\n          link: SEO_ITEMS[locale].indexPage.link,\r\n        },\r\n      ]}\r\n      lang={locale}\r\n      path={process.env.NEXT_PUBLIC_SITE_URL + SEO_ITEMS[locale].indexPage.link}\r\n    />\r\n    <MainCarousel carousel={carousel} />\r\n    <MainCollectionsSamples goods={goods} />\r\n    <MainStreetStyleSamples photos={streetStyle} />\r\n    <Celebrities celebrities={celebrities} />\r\n  </main>\r\n);\r\n\r\nexport const getServerSideProps: GetServerSideProps = async ({\r\n  locale,\r\n  defaultLocale,\r\n}) => {\r\n  const collectionNames = ['mainCarousel', 'Celebrities'];\r\n  const [\r\n    cockpitDataCarousel,\r\n    cockpitDataCelebrities,\r\n  ] = await getCockpitCollections(collectionNames);\r\n\r\n  const filter = `filter[link]=/street-style&populate=1`;\r\n  const cockpitDataRunways = await getCockpitCollection('Runways', filter);\r\n\r\n  const getGoods = getCockpitCollection.bind(undefined, 'Goods');\r\n  const collectionFiter = 'filter[onMain]=true&simple=true';\r\n  const collection = await getCockpitCollection('Collections', collectionFiter);\r\n  const goodsFilter = `limit=3${\r\n    collection.length ? `&filter[collection._id]=${collection[0]._id}` : ''\r\n  }&sort[_created]=-1`;\r\n  const cockpitDataGoods = await getGoods(goodsFilter);\r\n  if (cockpitDataGoods.total === 0) {\r\n    const goodsFilter = `populate=1&sort[collection._id]=-1&sort[_created]=-1&limit=3`;\r\n    let cockpitDataGoods = await getGoods(goodsFilter);\r\n    if (cockpitDataGoods.total === 0) {\r\n      const goodsFilter = 'limit=3&sort[_created]=-1';\r\n      cockpitDataGoods = await getGoods(goodsFilter);\r\n    }\r\n  }\r\n\r\n  const curRunway: ICockpitRunwaysAndLookbooksRaw = cockpitDataRunways.total\r\n    ? cockpitDataRunways.entries[0]\r\n    : null;\r\n\r\n  const carousel = cockpitDataCarousel.entries.map((el: ICockpitCarousel) => {\r\n    return {\r\n      title: el.title,\r\n      link: el.link,\r\n      image: el.image,\r\n    };\r\n  });\r\n\r\n  const goods = cockpitDataGoods.entries.map((el: ICockpitGoodsRaw) => {\r\n    return {\r\n      title: locale === defaultLocale ? el.title : el.title_en,\r\n      link: el.link,\r\n      description:\r\n        locale === defaultLocale ? el.description : el.description_en,\r\n      previewImage: el.previewImage,\r\n      secondImage: el.secondImage,\r\n      collectionId: el.collection._id,\r\n      _modified: el._modified,\r\n      _id: el._id,\r\n    };\r\n  });\r\n\r\n  const celebrities = cockpitDataCelebrities.entries\r\n    .map((el: ICockpitCelebrityRaw) => {\r\n      return {\r\n        name: locale === defaultLocale ? el.name : el.name_en,\r\n        proffesion: locale === defaultLocale ? el.proffesion : el.proffesion_en,\r\n        photo: el.photo,\r\n      };\r\n    })\r\n    .reverse()\r\n    .slice(0, 3);\r\n\r\n  return {\r\n    props: {\r\n      carousel,\r\n      goods,\r\n      celebrities: celebrities,\r\n      streetStyle: curRunway.photos\r\n        .reverse()\r\n        .slice(0, 3)\r\n        .map((photo) => photo.path),\r\n      locale,\r\n    },\r\n  };\r\n};\r\n\r\nexport default IndexPage;\r\n"]},"metadata":{},"sourceType":"module"}