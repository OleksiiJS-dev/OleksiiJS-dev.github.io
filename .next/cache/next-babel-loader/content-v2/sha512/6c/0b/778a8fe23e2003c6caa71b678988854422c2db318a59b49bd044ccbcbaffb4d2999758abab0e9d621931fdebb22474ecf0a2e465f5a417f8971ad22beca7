{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\archivegit\\\\blind-blind\\\\src\\\\components\\\\Carousel\\\\Carousel.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/* eslint-disable react/no-array-index-key */\nimport React, { useState, useEffect, useRef } from 'react';\nvar TRANSITION = 500;\n\nvar Carousel = function Carousel(_ref) {\n  _s();\n\n  var children = _ref.children,\n      _ref$infinity = _ref.infinity,\n      infinity = _ref$infinity === void 0 ? true : _ref$infinity,\n      buttonPrev = _ref.buttonPrev,\n      buttonNext = _ref.buttonNext,\n      withRange = _ref.withRange,\n      withDots = _ref.withDots,\n      callback = _ref.callback;\n  var carousel = useRef();\n\n  var _useState = useState(0),\n      slide = _useState[0],\n      setSlide = _useState[1];\n\n  var handleNextSlide = function handleNextSlide() {\n    if (slide + 1 < children.length) setSlide(slide + 1);else if (infinity) {\n      setSlide(slide + 1);\n      setTimeout(function () {\n        if (carousel.current) carousel.current.style.transition = 'none';\n        setSlide(0);\n        setTimeout(function () {\n          if (carousel.current) carousel.current.style.transition = \"transform \".concat(TRANSITION, \"ms\");\n        }, 10);\n      }, TRANSITION + 100);\n    }\n  };\n\n  var handlePrevSlide = function handlePrevSlide() {\n    if (slide - 1 >= 0) {\n      setSlide(slide - 1);\n    } else if (infinity) {\n      setSlide(slide - 1);\n      setTimeout(function () {\n        if (carousel.current) carousel.current.style.transition = 'none';\n        setSlide(children.length - 1);\n        setTimeout(function () {\n          if (carousel.current) carousel.current.style.transition = \"transform \".concat(TRANSITION, \"ms\");\n        }, 10);\n      }, TRANSITION + 100);\n    }\n  };\n\n  var handleTouch = function handleTouch() {\n    var startX = 0;\n\n    var handleTouchStart = function handleTouchStart(e) {\n      var screenX = e.touches[0].screenX;\n      startX = screenX;\n      if (carousel.current) carousel.current.style.transition = 'none';\n    };\n\n    var handleTouchMove = function handleTouchMove(e) {\n      var _carousel$current;\n\n      var screenX = e.changedTouches[0].screenX;\n\n      var _ref2 = (_carousel$current = carousel.current) !== null && _carousel$current !== void 0 ? _carousel$current : {},\n          _ref2$offsetWidth = _ref2.offsetWidth,\n          offsetWidth = _ref2$offsetWidth === void 0 ? 0 : _ref2$offsetWidth;\n\n      var delta = screenX - startX;\n      if (infinity || !(slide === children.length - 1 && delta < 0) && !(slide === 0 && delta > 0)) if (carousel.current) carousel.current.style.transform = \"translateX(\".concat(-offsetWidth * slide + delta, \"px)\");\n    };\n\n    var handleTouchEnd = function handleTouchEnd(e) {\n      var screenX = e.changedTouches[0].screenX;\n      var delta = screenX - startX;\n      if (carousel.current) carousel.current.style.transition = \"transform \".concat(TRANSITION, \"ms\");\n      if (delta < -40) handleNextSlide();else if (delta > 40) handlePrevSlide();else if (carousel.current) carousel.current.style.transform = \"translateX(-\".concat(100 * slide, \"%)\");\n    };\n\n    if (carousel.current) {\n      carousel.current.addEventListener('touchstart', handleTouchStart, {\n        passive: true\n      });\n      carousel.current.addEventListener('touchmove', handleTouchMove, {\n        passive: false\n      });\n      carousel.current.addEventListener('touchend', handleTouchEnd, {\n        passive: true\n      });\n    }\n\n    return function () {\n      if (carousel.current) {\n        carousel.current.removeEventListener('touchstart', handleTouchStart);\n        carousel.current.removeEventListener('touchmove', handleTouchMove);\n        carousel.current.removeEventListener('touchend', handleTouchEnd);\n      }\n    };\n  };\n\n  useEffect(function () {\n    if (carousel.current) carousel.current.style.transform = \"translateX(\".concat(-100 * slide, \"%)\");\n    var touchcleanUp = handleTouch();\n    if (callback) callback(slide);\n    return function () {\n      touchcleanUp();\n    };\n  }, [slide]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"carousel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-list\",\n      ref: carousel,\n      style: {\n        marginLeft: \"-\".concat(children.length * 100 * +infinity, \"%\"),\n        transition: \"transform \".concat(TRANSITION, \"ms\")\n      },\n      children: [infinity && children.map(function (child, idx) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"carousel-list-item\",\n          children: child\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, _this);\n      }), children.map(function (child, idx) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"carousel-list-item \".concat(idx === slide ? 'carousel-list-item-current' : ''),\n          children: child\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, _this);\n      }), infinity && children.map(function (child, idx) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"carousel-list-item\",\n          children: child\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, _this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        role: \"presentation\",\n        className: \"carousel-buttons-prev\",\n        onClick: handlePrevSlide,\n        children: buttonPrev\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        role: \"presentation\",\n        className: \"carousel-buttons-next\",\n        onClick: handleNextSlide,\n        children: buttonNext\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, _this), withRange && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-range\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"carousel-range-number\",\n        children: \"01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"carousel-range-input\",\n        value: slide,\n        type: \"range\",\n        min: \"0\",\n        max: children.length - 1,\n        step: \"1\",\n        onChange: function onChange(_ref3) {\n          var value = _ref3.target.value;\n          setSlide(+value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"carousel-range-number\",\n        children: \"\".concat(children.length < 10 ? 0 : '').concat(children.length)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }, _this), withDots && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-dots\",\n      children: children.map(function (_, idx) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          role: \"presentation\",\n          className: \"carousel-dots-item \".concat(idx === slide ? 'carousel-dots-item-current' : ''),\n          onClick: function onClick() {\n            return setSlide(idx);\n          }\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Carousel, \"2pTGsgSlC/XZXm9klRwzVEXVnWA=\");\n\n_c = Carousel;\nexport default Carousel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Carousel\");","map":{"version":3,"sources":["D:/archivegit/blind-blind/src/components/Carousel/Carousel.tsx"],"names":["React","useState","useEffect","useRef","TRANSITION","Carousel","children","infinity","buttonPrev","buttonNext","withRange","withDots","callback","carousel","slide","setSlide","handleNextSlide","length","setTimeout","current","style","transition","handlePrevSlide","handleTouch","startX","handleTouchStart","e","screenX","touches","handleTouchMove","changedTouches","offsetWidth","delta","transform","handleTouchEnd","addEventListener","passive","removeEventListener","touchcleanUp","marginLeft","map","child","idx","value","target","_"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-array-index-key */\r\nimport React, { useState, useEffect, useRef, RefObject } from 'react';\r\n\r\nimport { ICarouselProps } from './Types';\r\n\r\nconst TRANSITION = 500;\r\n\r\nconst Carousel: React.FC<ICarouselProps> = ({\r\n  children,\r\n  infinity = true,\r\n  buttonPrev,\r\n  buttonNext,\r\n  withRange,\r\n  withDots,\r\n  callback,\r\n}): JSX.Element => {\r\n  const carousel = useRef<HTMLDivElement>();\r\n  const [slide, setSlide] = useState(0);\r\n\r\n  const handleNextSlide = () => {\r\n    if (slide + 1 < children.length) setSlide(slide + 1);\r\n    else if (infinity) {\r\n      setSlide(slide + 1);\r\n      setTimeout(() => {\r\n        if (carousel.current) carousel.current.style.transition = 'none';\r\n        setSlide(0);\r\n        setTimeout(() => {\r\n          if (carousel.current)\r\n            carousel.current.style.transition = `transform ${TRANSITION}ms`;\r\n        }, 10);\r\n      }, TRANSITION + 100);\r\n    }\r\n  };\r\n\r\n  const handlePrevSlide = () => {\r\n    if (slide - 1 >= 0) {\r\n      setSlide(slide - 1);\r\n    } else if (infinity) {\r\n      setSlide(slide - 1);\r\n      setTimeout(() => {\r\n        if (carousel.current) carousel.current.style.transition = 'none';\r\n        setSlide(children.length - 1);\r\n        setTimeout(() => {\r\n          if (carousel.current)\r\n            carousel.current.style.transition = `transform ${TRANSITION}ms`;\r\n        }, 10);\r\n      }, TRANSITION + 100);\r\n    }\r\n  };\r\n\r\n  const handleTouch = () => {\r\n    let startX = 0;\r\n    const handleTouchStart = (e: TouchEvent) => {\r\n      const { screenX } = e.touches[0];\r\n      startX = screenX;\r\n      if (carousel.current) carousel.current.style.transition = 'none';\r\n    };\r\n\r\n    const handleTouchMove = (e: TouchEvent) => {\r\n      const { screenX } = e.changedTouches[0];\r\n      const { offsetWidth = 0 } = carousel.current ?? {};\r\n      const delta = screenX - startX;\r\n      if (\r\n        infinity ||\r\n        (!(slide === children.length - 1 && delta < 0) &&\r\n          !(slide === 0 && delta > 0))\r\n      )\r\n        if (carousel.current)\r\n          carousel.current.style.transform = `translateX(${\r\n            -offsetWidth * slide + delta\r\n          }px)`;\r\n    };\r\n\r\n    const handleTouchEnd = (e: TouchEvent) => {\r\n      const { screenX } = e.changedTouches[0];\r\n      const delta = screenX - startX;\r\n      if (carousel.current)\r\n        carousel.current.style.transition = `transform ${TRANSITION}ms`;\r\n      if (delta < -40) handleNextSlide();\r\n      else if (delta > 40) handlePrevSlide();\r\n      else if (carousel.current)\r\n        carousel.current.style.transform = `translateX(-${100 * slide}%)`;\r\n    };\r\n    if (carousel.current) {\r\n      carousel.current.addEventListener('touchstart', handleTouchStart, {\r\n        passive: true,\r\n      });\r\n      carousel.current.addEventListener('touchmove', handleTouchMove, {\r\n        passive: false,\r\n      });\r\n      carousel.current.addEventListener('touchend', handleTouchEnd, {\r\n        passive: true,\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (carousel.current) {\r\n        carousel.current.removeEventListener('touchstart', handleTouchStart);\r\n        carousel.current.removeEventListener('touchmove', handleTouchMove);\r\n        carousel.current.removeEventListener('touchend', handleTouchEnd);\r\n      }\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (carousel.current)\r\n      carousel.current.style.transform = `translateX(${-100 * slide}%)`;\r\n    const touchcleanUp = handleTouch();\r\n    if (callback) callback(slide);\r\n    return () => {\r\n      touchcleanUp();\r\n    };\r\n  }, [slide]);\r\n\r\n  return (\r\n    <div className=\"carousel\">\r\n      <div\r\n        className=\"carousel-list\"\r\n        ref={carousel as RefObject<HTMLDivElement>}\r\n        style={{\r\n          marginLeft: `-${children.length * 100 * +infinity}%`,\r\n          transition: `transform ${TRANSITION}ms`,\r\n        }}\r\n      >\r\n        {infinity &&\r\n          children.map((child, idx) => (\r\n            <div key={idx} className=\"carousel-list-item\">\r\n              {child}\r\n            </div>\r\n          ))}\r\n        {children.map((child, idx) => (\r\n          <div\r\n            key={idx}\r\n            className={`carousel-list-item ${\r\n              idx === slide ? 'carousel-list-item-current' : ''\r\n            }`}\r\n          >\r\n            {child}\r\n          </div>\r\n        ))}\r\n        {infinity &&\r\n          children.map((child, idx) => (\r\n            <div key={idx} className=\"carousel-list-item\">\r\n              {child}\r\n            </div>\r\n          ))}\r\n      </div>\r\n      <div className=\"carousel-buttons\">\r\n        <div\r\n          role=\"presentation\"\r\n          className=\"carousel-buttons-prev\"\r\n          onClick={handlePrevSlide}\r\n        >\r\n          {buttonPrev}\r\n        </div>\r\n        <div\r\n          role=\"presentation\"\r\n          className=\"carousel-buttons-next\"\r\n          onClick={handleNextSlide}\r\n        >\r\n          {buttonNext}\r\n        </div>\r\n      </div>\r\n      {withRange && (\r\n        <div className=\"carousel-range\">\r\n          <span className=\"carousel-range-number\">01</span>\r\n          <input\r\n            className=\"carousel-range-input\"\r\n            value={slide}\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max={children.length - 1}\r\n            step=\"1\"\r\n            onChange={({ target: { value } }) => {\r\n              setSlide(+value);\r\n            }}\r\n          />\r\n          <span className=\"carousel-range-number\">{`${\r\n            children.length < 10 ? 0 : ''\r\n          }${children.length}`}</span>\r\n        </div>\r\n      )}\r\n      {withDots && (\r\n        <div className=\"carousel-dots\">\r\n          {children.map((_, idx) => (\r\n            <div\r\n              key={idx}\r\n              role=\"presentation\"\r\n              className={`carousel-dots-item ${\r\n                idx === slide ? 'carousel-dots-item-current' : ''\r\n              }`}\r\n              onClick={() => setSlide(idx)}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Carousel;\r\n"]},"metadata":{},"sourceType":"module"}