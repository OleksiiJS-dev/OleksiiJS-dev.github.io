{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\archivegit\\\\blind-blind\\\\src\\\\components\\\\Header\\\\SearchInput.tsx\";\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport Fuse from 'fuse.js';\nimport useCockpit from '../../hooks/useCockpit';\nimport GoodsSearchItem from '../Goods/GoodsSearchItem';\nimport { TRANSLATE } from '../../constants/languages';\n\nconst SearchInput = ({\n  close\n}) => {\n  const {\n    locale,\n    defaultLocale\n  } = useRouter();\n  const {\n    0: searchValue,\n    1: setSearchValue\n  } = useState('');\n  const {\n    0: foundGoods,\n    1: setFoundGoods\n  } = useState([]);\n  const {\n    data: goods\n  } = useCockpit(false);\n  const goodsList = goods === null || goods === void 0 ? void 0 : goods.entries;\n  const options = {\n    includeScore: true,\n    keys: ['title', 'title_en']\n  };\n  const fuse = new Fuse(goodsList, options);\n  useEffect(() => {\n    if (goodsList) setFoundGoods(fuse.search(searchValue).map(result => result.item));\n  }, [searchValue, goodsList]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-input-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"search-input\",\n      value: searchValue,\n      placeholder: TRANSLATE[locale].search,\n      onChange: e => setSearchValue(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      role: \"presentation\",\n      onClick: () => {\n        setSearchValue('');\n        close && close();\n      },\n      className: \"search-result-container\",\n      children: [searchValue && !foundGoods.length && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"not-found\",\n        children: [TRANSLATE[locale].goodsNotFound[0], ` \"${searchValue}\" `, TRANSLATE[locale].goodsNotFound[1]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this), foundGoods.map(({\n        _id,\n        previewImage,\n        title,\n        title_en,\n        link,\n        stockPrice,\n        price\n      }) => /*#__PURE__*/_jsxDEV(GoodsSearchItem, {\n        photo: previewImage.path,\n        title: locale === defaultLocale ? title : title_en,\n        link: link,\n        price: stockPrice ? stockPrice : price\n      }, _id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\nexport default SearchInput;","map":{"version":3,"sources":["D:/archivegit/blind-blind/src/components/Header/SearchInput.tsx"],"names":["useRouter","useEffect","useState","Fuse","useCockpit","GoodsSearchItem","TRANSLATE","SearchInput","close","locale","defaultLocale","searchValue","setSearchValue","foundGoods","setFoundGoods","data","goods","goodsList","entries","options","includeScore","keys","fuse","search","map","result","item","e","target","value","length","goodsNotFound","_id","previewImage","title","title_en","link","stockPrice","price","path"],"mappings":"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","sourcesContent":["import { useRouter } from 'next/router';\r\nimport { useEffect, useState } from 'react';\r\nimport Fuse from 'fuse.js';\r\n\r\nimport useCockpit from '../../hooks/useCockpit';\r\n\r\nimport GoodsSearchItem from '../Goods/GoodsSearchItem';\r\n\r\nimport { ICockpitGoodsEntries, ICockpitGoodsRaw } from '../../cockpitTypes';\r\nimport { ISearchInputProps } from './Types';\r\n\r\nimport { TRANSLATE } from '../../constants/languages';\r\n\r\nconst SearchInput: React.FC<ISearchInputProps> = ({ close }) => {\r\n  const { locale, defaultLocale } = useRouter();\r\n\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [foundGoods, setFoundGoods] = useState<ICockpitGoodsRaw[]>([]);\r\n\r\n  const { data: goods } = useCockpit<ICockpitGoodsEntries>(false);\r\n  const goodsList = goods?.entries as ICockpitGoodsRaw[];\r\n\r\n  const options = {\r\n    includeScore: true,\r\n    keys: ['title', 'title_en'],\r\n  };\r\n\r\n  const fuse = new Fuse(goodsList, options);\r\n\r\n  useEffect(() => {\r\n    if (goodsList)\r\n      setFoundGoods(fuse.search(searchValue).map((result) => result.item));\r\n  }, [searchValue, goodsList]);\r\n\r\n  return (\r\n    <div className=\"search-input-container\">\r\n      <input\r\n        type=\"text\"\r\n        className=\"search-input\"\r\n        value={searchValue}\r\n        placeholder={TRANSLATE[locale as 'ru' | 'en'].search}\r\n        onChange={(e) => setSearchValue(e.target.value)}\r\n      />\r\n      <div\r\n        role=\"presentation\"\r\n        onClick={() => {\r\n          setSearchValue('');\r\n          close && close();\r\n        }}\r\n        className=\"search-result-container\"\r\n      >\r\n        {searchValue && !foundGoods.length && (\r\n          <p className=\"not-found\">\r\n            {TRANSLATE[locale as 'ru' | 'en'].goodsNotFound[0]}\r\n            {` \"${searchValue}\" `}\r\n            {TRANSLATE[locale as 'ru' | 'en'].goodsNotFound[1]}\r\n          </p>\r\n        )}\r\n        {foundGoods.map(\r\n          ({ _id, previewImage, title, title_en, link, stockPrice, price }) => (\r\n            <GoodsSearchItem\r\n              key={_id}\r\n              photo={previewImage.path}\r\n              title={locale === defaultLocale ? title : title_en}\r\n              link={link}\r\n              price={stockPrice ? stockPrice : price}\r\n            />\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchInput;\r\n"]},"metadata":{},"sourceType":"module"}