{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\archivegit\\\\blind-blind\\\\pages\\\\index.tsx\",\n    _this = this;\n\nimport MainCarousel from '../src/components/MainCarousel/MainCarousel';\nimport Seo from '../src/components/Seo/Seo';\nimport MainCollectionsSamples from '../src/components/MainCollectionsSamples/MainCollectionsSamples';\nimport MainStreetStyleSamples from '../src/components/MainStreetStyleSamples/MainStreetStyleSamples';\nimport Celebrities from '../src/components/Celebrities/Celebrities';\nimport { SEO_ITEMS } from '../src/constants/seoItems';\n\nvar IndexPage = function IndexPage(_ref) {\n  var carousel = _ref.carousel,\n      goods = _ref.goods,\n      celebrities = _ref.celebrities,\n      streetStyle = _ref.streetStyle,\n      locale = _ref.locale;\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"main-page\",\n    children: [/*#__PURE__*/_jsxDEV(Seo, {\n      title: SEO_ITEMS[locale].indexPage.title,\n      description: SEO_ITEMS[locale].indexPage.title,\n      breadcrumbs: [{\n        title: SEO_ITEMS[locale].indexPage.breadcrumbName,\n        link: SEO_ITEMS[locale].indexPage.link\n      }],\n      lang: locale,\n      path: process.env.NEXT_PUBLIC_SITE_URL + SEO_ITEMS[locale].indexPage.link\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(MainCarousel, {\n      carousel: carousel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(MainCollectionsSamples, {\n      goods: goods\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(MainStreetStyleSamples, {\n      photos: streetStyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(Celebrities, {\n      celebrities: celebrities\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 3\n  }, _this);\n};\n\n_c = IndexPage;\nexport var __N_SSP = true;\nexport default IndexPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"IndexPage\");","map":{"version":3,"sources":["D:/archivegit/blind-blind/pages/index.tsx"],"names":["MainCarousel","Seo","MainCollectionsSamples","MainStreetStyleSamples","Celebrities","SEO_ITEMS","IndexPage","carousel","goods","celebrities","streetStyle","locale","indexPage","title","breadcrumbName","link","process","env","NEXT_PUBLIC_SITE_URL"],"mappings":";;;;;AAEA,OAAOA,YAAP,MAAyB,6CAAzB;AACA,OAAOC,GAAP,MAAgB,2BAAhB;AACA,OAAOC,sBAAP,MAAmC,iEAAnC;AACA,OAAOC,sBAAP,MAAmC,iEAAnC;AACA,OAAOC,WAAP,MAAwB,2CAAxB;AAeA,SAASC,SAAT,QAA0B,2BAA1B;;AAEA,IAAMC,SAAoC,GAAG,SAAvCA,SAAuC;AAAA,MAC3CC,QAD2C,QAC3CA,QAD2C;AAAA,MAE3CC,KAF2C,QAE3CA,KAF2C;AAAA,MAG3CC,WAH2C,QAG3CA,WAH2C;AAAA,MAI3CC,WAJ2C,QAI3CA,WAJ2C;AAAA,MAK3CC,MAL2C,QAK3CA,MAL2C;AAAA,sBAO3C;AAAM,IAAA,SAAS,EAAC,WAAhB;AAAA,4BACE,QAAC,GAAD;AACE,MAAA,KAAK,EAAEN,SAAS,CAACM,MAAD,CAAT,CAAkBC,SAAlB,CAA4BC,KADrC;AAEE,MAAA,WAAW,EAAER,SAAS,CAACM,MAAD,CAAT,CAAkBC,SAAlB,CAA4BC,KAF3C;AAGE,MAAA,WAAW,EAAE,CACX;AACEA,QAAAA,KAAK,EAAER,SAAS,CAACM,MAAD,CAAT,CAAkBC,SAAlB,CAA4BE,cADrC;AAEEC,QAAAA,IAAI,EAAEV,SAAS,CAACM,MAAD,CAAT,CAAkBC,SAAlB,CAA4BG;AAFpC,OADW,CAHf;AASE,MAAA,IAAI,EAAEJ,MATR;AAUE,MAAA,IAAI,EAAEK,OAAO,CAACC,GAAR,CAAYC,oBAAZ,GAAmCb,SAAS,CAACM,MAAD,CAAT,CAAkBC,SAAlB,CAA4BG;AAVvE;AAAA;AAAA;AAAA;AAAA,aADF,eAaE,QAAC,YAAD;AAAc,MAAA,QAAQ,EAAER;AAAxB;AAAA;AAAA;AAAA;AAAA,aAbF,eAcE,QAAC,sBAAD;AAAwB,MAAA,KAAK,EAAEC;AAA/B;AAAA;AAAA;AAAA;AAAA,aAdF,eAeE,QAAC,sBAAD;AAAwB,MAAA,MAAM,EAAEE;AAAhC;AAAA;AAAA;AAAA;AAAA,aAfF,eAgBE,QAAC,WAAD;AAAa,MAAA,WAAW,EAAED;AAA1B;AAAA;AAAA;AAAA;AAAA,aAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,WAP2C;AAAA,CAA7C;;KAAMH,S;;AA2GN,eAAeA,SAAf","sourcesContent":["import { NextPage, GetServerSideProps } from 'next';\r\n\r\nimport MainCarousel from '../src/components/MainCarousel/MainCarousel';\r\nimport Seo from '../src/components/Seo/Seo';\r\nimport MainCollectionsSamples from '../src/components/MainCollectionsSamples/MainCollectionsSamples';\r\nimport MainStreetStyleSamples from '../src/components/MainStreetStyleSamples/MainStreetStyleSamples';\r\nimport Celebrities from '../src/components/Celebrities/Celebrities';\r\n\r\nimport { IIndexPageProps } from '../src/pagesTypes';\r\nimport {\r\n  ICockpitCarousel,\r\n  ICockpitCelebrityRaw,\r\n  ICockpitGoodsRaw,\r\n  ICockpitRunwaysAndLookbooksRaw,\r\n} from '../src/cockpitTypes';\r\n\r\nimport {\r\n  getCockpitCollection,\r\n  getCockpitCollections,\r\n} from '../src/utils/getCockpitData';\r\n\r\nimport { SEO_ITEMS } from '../src/constants/seoItems';\r\n\r\nconst IndexPage: NextPage<IIndexPageProps> = ({\r\n  carousel,\r\n  goods,\r\n  celebrities,\r\n  streetStyle,\r\n  locale,\r\n}) => (\r\n  <main className=\"main-page\">\r\n    <Seo\r\n      title={SEO_ITEMS[locale].indexPage.title}\r\n      description={SEO_ITEMS[locale].indexPage.title}\r\n      breadcrumbs={[\r\n        {\r\n          title: SEO_ITEMS[locale].indexPage.breadcrumbName,\r\n          link: SEO_ITEMS[locale].indexPage.link,\r\n        },\r\n      ]}\r\n      lang={locale}\r\n      path={process.env.NEXT_PUBLIC_SITE_URL + SEO_ITEMS[locale].indexPage.link}\r\n    />\r\n    <MainCarousel carousel={carousel} />\r\n    <MainCollectionsSamples goods={goods} />\r\n    <MainStreetStyleSamples photos={streetStyle} />\r\n    <Celebrities celebrities={celebrities} />\r\n  </main>\r\n);\r\n\r\nexport const getServerSideProps: GetServerSideProps = async ({\r\n  locale,\r\n  defaultLocale,\r\n}) => {\r\n  const collectionNames = ['mainCarousel', 'Celebrities'];\r\n  const [\r\n    cockpitDataCarousel,\r\n    cockpitDataCelebrities,\r\n  ] = await getCockpitCollections(collectionNames);\r\n\r\n  const filter = `filter[link]=/street-style&populate=1`;\r\n  const cockpitDataRunways = await getCockpitCollection('Runways', filter);\r\n\r\n  const getGoods = getCockpitCollection.bind(undefined, 'Goods');\r\n  const collectionFiter = 'filter[onMain]=true&simple=true';\r\n  const collection = await getCockpitCollection('Collections', collectionFiter);\r\n  const goodsFilter = `limit=3${\r\n    collection.length ? `&filter[collection._id]=${collection[0]._id}` : ''\r\n  }&sort[_created]=-1`;\r\n  const cockpitDataGoods = await getGoods(goodsFilter);\r\n  if (cockpitDataGoods.total === 0) {\r\n    const goodsFilter = `populate=1&sort[collection._id]=-1&sort[_created]=-1&limit=3`;\r\n    let cockpitDataGoods = await getGoods(goodsFilter);\r\n    if (cockpitDataGoods.total === 0) {\r\n      const goodsFilter = 'limit=3&sort[_created]=-1';\r\n      cockpitDataGoods = await getGoods(goodsFilter);\r\n    }\r\n  }\r\n\r\n  const curRunway: ICockpitRunwaysAndLookbooksRaw = cockpitDataRunways.total\r\n    ? cockpitDataRunways.entries[0]\r\n    : null;\r\n\r\n  const carousel = cockpitDataCarousel.entries.map((el: ICockpitCarousel) => {\r\n    return {\r\n      title: el.title,\r\n      link: el.link,\r\n      image: el.image,\r\n    };\r\n  });\r\n\r\n  const goods = cockpitDataGoods.entries.map((el: ICockpitGoodsRaw) => {\r\n    return {\r\n      title: locale === defaultLocale ? el.title : el.title_en,\r\n      link: el.link,\r\n      description:\r\n        locale === defaultLocale ? el.description : el.description_en,\r\n      previewImage: el.previewImage,\r\n      secondImage: el.secondImage,\r\n      collectionId: el.collection._id,\r\n      _modified: el._modified,\r\n      _id: el._id,\r\n    };\r\n  });\r\n\r\n  const celebrities = cockpitDataCelebrities.entries\r\n    .map((el: ICockpitCelebrityRaw) => {\r\n      return {\r\n        name: locale === defaultLocale ? el.name : el.name_en,\r\n        proffesion: locale === defaultLocale ? el.proffesion : el.proffesion_en,\r\n        photo: el.photo,\r\n      };\r\n    })\r\n    .reverse()\r\n    .slice(0, 3);\r\n\r\n  return {\r\n    props: {\r\n      carousel,\r\n      goods,\r\n      celebrities: celebrities,\r\n      streetStyle: curRunway.photos\r\n        .reverse()\r\n        .slice(0, 3)\r\n        .map((photo) => photo.path),\r\n      locale,\r\n    },\r\n  };\r\n};\r\n\r\nexport default IndexPage;\r\n"]},"metadata":{},"sourceType":"module"}