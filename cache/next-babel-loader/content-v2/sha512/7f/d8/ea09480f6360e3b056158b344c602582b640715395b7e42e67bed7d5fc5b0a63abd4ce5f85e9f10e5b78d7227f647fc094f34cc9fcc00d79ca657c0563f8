{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport Modal from '../Modal/Modal';\nimport Close from '../../assets/svg/close.svg';\nimport { useRouter } from 'next/router';\nimport { TRANSLATE } from '../../constants/languages';\nimport Form from '../Form/Form';\nimport { FORMIK } from '../../constants/form';\n\nconst ModalWindowStart = () => {\n  const {\n    0: modalOpen,\n    1: setModalOpen\n  } = useState(false);\n  const {\n    0: wasModalOpened,\n    1: setWasModalOpened\n  } = useState(false);\n  const {\n    locale\n  } = useRouter();\n\n  const handleShowModal = () => {\n    setModalOpen(!modalOpen);\n    localStorage.setItem('wasModalOpened', 'true');\n    document.body.classList.toggle('hide-overflow');\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem('wasModalOpened')) setWasModalOpened(true);\n  }, []);\n  useEffect(() => {\n    if (!wasModalOpened) {\n      const startTimeout = () => {\n        return setTimeout(() => {\n          handleShowModal();\n        }, 10000);\n      };\n\n      const timeout = startTimeout();\n      return () => clearTimeout(timeout);\n    }\n  }, [wasModalOpened]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: modalOpen && /*#__PURE__*/createPortal( /*#__PURE__*/_jsx(\"div\", {\n      className: \"window-start\",\n      children: /*#__PURE__*/_jsx(Modal, {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"window-start__wrapper\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"close\",\n            onClick: e => {\n              e.stopPropagation();\n              handleShowModal();\n            },\n            children: /*#__PURE__*/_jsx(Close, {})\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"window-start__container\",\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"window-start__title\",\n              children: \"blind\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"window-start__text\",\n              children: TRANSLATE[locale].modalWindowStartText\n            }), /*#__PURE__*/_jsx(Form, {\n              formikConfig: {\n                initialValues: FORMIK.modalStartForm.values,\n                validationSchema: FORMIK.modalStartForm.validationSchema(locale),\n                onSubmit: ({\n                  firstName,\n                  email,\n                  phone,\n                  dob\n                }, {\n                  resetForm\n                }) => {\n                  fetch('/api/subscription', {\n                    headers: {\n                      'Content-Type': 'application/json'\n                    },\n                    method: 'POST',\n                    body: JSON.stringify({\n                      firstName,\n                      email,\n                      phone,\n                      dob\n                    })\n                  }).then(res => {\n                    if (!res.ok) {\n                      throw Error(res.statusText);\n                    }\n\n                    resetForm();\n                    handleShowModal();\n                  });\n                }\n              },\n              types: FORMIK.modalStartForm.types,\n              placeholders: FORMIK.modalStartForm.placeholders(locale),\n              buttonTitle: TRANSLATE[locale].subscribe\n            })]\n          })]\n        })\n      })\n    }), document.body)\n  });\n};\n\nexport default ModalWindowStart;","map":null,"metadata":{},"sourceType":"module"}