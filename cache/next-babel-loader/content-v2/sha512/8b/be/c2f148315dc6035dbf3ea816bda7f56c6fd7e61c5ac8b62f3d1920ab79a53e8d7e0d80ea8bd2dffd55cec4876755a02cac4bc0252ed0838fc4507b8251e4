{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { useContext } from 'react';\nimport Form from '../Form/Form';\nimport PriceLabel from './PriceLabel';\nimport ZoomImage from './ZoomImage';\nimport SizeTableIcon from '../../assets/svg/size-table.svg';\nimport { cartContext } from '../../context/cartContext';\nimport { TRANSLATE } from '../../constants/languages';\nimport { FORMIK } from '../../constants/form';\nimport { currencyContext } from '../../context/currencyContext';\n\nconst GoodsSingle = ({\n  id,\n  title,\n  link,\n  price,\n  stockPrice,\n  photo,\n  secondPhoto,\n  otherPhotos,\n  sizes,\n  description,\n  materials,\n  isExclusive,\n  collectionLink,\n  collectionTitle\n}) => {\n  const router = useRouter();\n  const {\n    locale\n  } = router;\n  const isServer = true;\n  const curCartContext = useContext(cartContext);\n  const {\n    currency,\n    currencyRate,\n    USDRate\n  } = useContext(currencyContext);\n\n  const addToCart = details => {\n    curCartContext.addItem({\n      id,\n      title,\n      link: link,\n      price: stockPrice ? stockPrice : price,\n      photo,\n      details: details,\n      amount: 1,\n      collectionTitle\n    });\n\n    if (false) {\n      const code = link === null || link === void 0 ? void 0 : link.replace('/', '');\n      fbq('track', 'AddToCart', {\n        content_type: 'product',\n        content_ids: code,\n        currency: 'USD',\n        value: currency.toString() === 'UAH' ? +(stockPrice ? stockPrice : price) / USDRate : +(stockPrice ? stockPrice : price) / currencyRate\n      });\n    }\n\n    router.push('/cart');\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"goods-single\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"goods-single__gallery\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"first-photo\",\n        children: /*#__PURE__*/_jsx(ZoomImage, {\n          image: photo,\n          alt: title,\n          zoom: 2\n        })\n      }), secondPhoto && /*#__PURE__*/_jsx(\"div\", {\n        className: \"second-photo\",\n        children: /*#__PURE__*/_jsx(ZoomImage, {\n          image: secondPhoto,\n          alt: title,\n          zoom: 2\n        })\n      }), typeof otherPhotos !== 'string' && otherPhotos.map(({\n        path\n      }) => /*#__PURE__*/_jsx(\"div\", {\n        className: \"other-photo\",\n        children: /*#__PURE__*/_jsx(ZoomImage, {\n          image: path,\n          alt: title,\n          zoom: 2\n        })\n      }, path))]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"goods-single__info\",\n      children: [/*#__PURE__*/_jsx(\"p\", {\n        className: \"title\",\n        children: title\n      }), /*#__PURE__*/_jsx(PriceLabel, {\n        price: price,\n        stockPrice: stockPrice\n      }), isExclusive ? /*#__PURE__*/_jsxs(\"div\", {\n        className: \"individual-tailoring\",\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"title\",\n          children: TRANSLATE[locale].tailoring\n        }), /*#__PURE__*/_jsx(Form, {\n          formikConfig: {\n            initialValues: !isServer && localStorage.getItem(id) ? _objectSpread({}, JSON.parse(localStorage.getItem(id))) : FORMIK.goodsExclusive.values,\n            validationSchema: FORMIK.goodsExclusive.validationSchema(locale),\n            onSubmit: values => {\n              localStorage.setItem(id, JSON.stringify(values));\n              addToCart(values);\n            }\n          },\n          types: FORMIK.goodsExclusive.types,\n          suffixes: FORMIK.goodsExclusive.suffixes(locale),\n          placeholders: FORMIK.goodsExclusive.placeholders(locale),\n          buttonTitle: TRANSLATE[locale].addToCart\n        })]\n      }) : sizes.length ? /*#__PURE__*/_jsx(Form, {\n        formikConfig: {\n          initialValues: {\n            size: sizes[0].forOrder ? `${sizes[0].value} ${TRANSLATE[locale].sizeUnderOrder}` : sizes[0].value\n          },\n          onSubmit: values => {\n            localStorage.setItem(id, JSON.stringify(values.size));\n            addToCart(values.size);\n          }\n        },\n        types: {\n          size: 'select'\n        },\n        placeholders: {},\n        selectOptions: {\n          size: sizes.map(size => size.forOrder ? `${size.value} ${TRANSLATE[locale].sizeUnderOrder}` : size.value)\n        },\n        buttonTitle: TRANSLATE[locale].addToCart\n      }) : /*#__PURE__*/_jsx(\"div\", {\n        className: \"button-container\",\n        children: /*#__PURE__*/_jsx(\"button\", {\n          className: \"button\",\n          disabled: true,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            className: \"button__title\",\n            children: TRANSLATE[locale].outOfStock\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"materials-container\",\n        children: materials.map(material => /*#__PURE__*/_jsx(\"p\", {\n          className: \"material\",\n          children: material\n        }, material))\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: \"description\",\n        children: description\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"size-button-container\",\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: '/table-razmer',\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"size-button\",\n            children: TRANSLATE[locale].sizeTable\n          })\n        }), /*#__PURE__*/_jsx(SizeTableIcon, {})]\n      }), /*#__PURE__*/_jsx(Link, {\n        href: '/collections' + collectionLink,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"back-to-collection\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"arrow\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            children: TRANSLATE[locale].backToCollection\n          })]\n        })\n      })]\n    })]\n  });\n};\n\nexport default GoodsSingle;","map":null,"metadata":{},"sourceType":"module"}