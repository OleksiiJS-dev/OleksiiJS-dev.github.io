{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\archivegit\\\\blind-blind\\\\pages\\\\collections\\\\[collection].tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useRouter } from 'next/router';\nimport Error from '../_error';\nimport GoodsList from '../../src/components/Goods/GoodsList';\nimport GoodsListTitle from '../../src/components/Goods/GoodsListTitle';\nimport Seo from '../../src/components/Seo/Seo';\nimport SubCollections from '../../src/components/SubCollections/SubCollections';\nimport { SEO_ITEMS, DEFAULT_DESCRIPTION } from '../../src/constants/seoItems';\nimport { LANGUAGES } from '../../src/constants/languages';\n\nvar CollectionPage = function CollectionPage(_ref) {\n  _s();\n\n  var collection = _ref.collection,\n      categories = _ref.categories,\n      goods = _ref.goods,\n      subCollections = _ref.subCollections;\n\n  var _useRouter = useRouter(),\n      locale = _useRouter.locale,\n      defaultLocale = _useRouter.defaultLocale;\n\n  if (!collection) return /*#__PURE__*/_jsxDEV(Error, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 27\n  }, _this);\n  var collectionDescription = locale === defaultLocale ? collection.description : collection.description_en;\n  var collectionLink = LANGUAGES[locale].path + '/collections' + collection.link;\n  var collectionName = locale === defaultLocale ? collection.title : collection.title_en;\n  if (subCollections) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Seo, {\n      title: collectionName,\n      description: collectionDescription || DEFAULT_DESCRIPTION[locale],\n      breadcrumbs: [{\n        title: SEO_ITEMS[locale].indexPage.breadcrumbName,\n        link: SEO_ITEMS[locale].indexPage.link\n      }, {\n        title: collectionName,\n        link: collectionLink\n      }],\n      lang: locale,\n      path: process.env.NEXT_PUBLIC_SITE_URL + collectionLink\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(GoodsListTitle, {\n      title: collectionName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(SubCollections, {\n      subCollections: subCollections\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"collection-page\",\n    children: [/*#__PURE__*/_jsxDEV(Seo, {\n      title: collectionName,\n      description: collectionDescription || DEFAULT_DESCRIPTION[locale],\n      breadcrumbs: [{\n        title: SEO_ITEMS[locale].indexPage.breadcrumbName,\n        link: SEO_ITEMS[locale].indexPage.link\n      }, {\n        title: collectionName,\n        link: collectionLink\n      }],\n      lang: locale,\n      path: process.env.NEXT_PUBLIC_SITE_URL + collectionLink\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(GoodsListTitle, {\n      title: collectionName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"goods-container\",\n      children: /*#__PURE__*/_jsxDEV(GoodsList, {\n        goods: goods,\n        categories: categories\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CollectionPage, \"Vwkz1tPTBhM0K7FgX71LFvKHz6A=\", false, function () {\n  return [useRouter];\n});\n\n_c = CollectionPage;\nexport var __N_SSP = true;\nexport default CollectionPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CollectionPage\");","map":{"version":3,"sources":["D:/archivegit/blind-blind/pages/collections/[collection].tsx"],"names":["useRouter","Error","GoodsList","GoodsListTitle","Seo","SubCollections","SEO_ITEMS","DEFAULT_DESCRIPTION","LANGUAGES","CollectionPage","collection","categories","goods","subCollections","locale","defaultLocale","collectionDescription","description","description_en","collectionLink","path","link","collectionName","title","title_en","indexPage","breadcrumbName","process","env","NEXT_PUBLIC_SITE_URL"],"mappings":";;;;;;;AACA,SAASA,SAAT,QAA0B,aAA1B;AAEA,OAAOC,KAAP,MAAkB,WAAlB;AAEA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,cAAP,MAA2B,2CAA3B;AACA,OAAOC,GAAP,MAAgB,8BAAhB;AACA,OAAOC,cAAP,MAA2B,oDAA3B;AAUA,SAASC,SAAT,EAAoBC,mBAApB,QAA+C,8BAA/C;AACA,SAASC,SAAT,QAA0B,+BAA1B;;AAEA,IAAMC,cAA8C,GAAG,SAAjDA,cAAiD,OAKjD;AAAA;;AAAA,MAJJC,UAII,QAJJA,UAII;AAAA,MAHJC,UAGI,QAHJA,UAGI;AAAA,MAFJC,KAEI,QAFJA,KAEI;AAAA,MADJC,cACI,QADJA,cACI;;AAAA,mBAC8Bb,SAAS,EADvC;AAAA,MACIc,MADJ,cACIA,MADJ;AAAA,MACYC,aADZ,cACYA,aADZ;;AAGJ,MAAI,CAACL,UAAL,EAAiB,oBAAO,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,WAAP;AAEjB,MAAMM,qBAAqB,GACzBF,MAAM,KAAKC,aAAX,GACIL,UAAU,CAACO,WADf,GAEIP,UAAU,CAACQ,cAHjB;AAKA,MAAMC,cAAc,GAClBX,SAAS,CAACM,MAAD,CAAT,CAAiCM,IAAjC,GAAwC,cAAxC,GAAyDV,UAAU,CAACW,IADtE;AAEA,MAAMC,cAAc,GAClBR,MAAM,KAAKC,aAAX,GAA2BL,UAAU,CAACa,KAAtC,GAA8Cb,UAAU,CAACc,QAD3D;AAGA,MAAIX,cAAJ,EACE,oBACE;AAAA,4BACE,QAAC,GAAD;AACE,MAAA,KAAK,EAAES,cADT;AAEE,MAAA,WAAW,EACTN,qBAAqB,IAAIT,mBAAmB,CAACO,MAAD,CAHhD;AAKE,MAAA,WAAW,EAAE,CACX;AACES,QAAAA,KAAK,EAAEjB,SAAS,CAACQ,MAAD,CAAT,CAAiCW,SAAjC,CAA2CC,cADpD;AAEEL,QAAAA,IAAI,EAAEf,SAAS,CAACQ,MAAD,CAAT,CAAiCW,SAAjC,CAA2CJ;AAFnD,OADW,EAKX;AACEE,QAAAA,KAAK,EAAED,cADT;AAEED,QAAAA,IAAI,EAAEF;AAFR,OALW,CALf;AAeE,MAAA,IAAI,EAAEL,MAfR;AAgBE,MAAA,IAAI,EAAEa,OAAO,CAACC,GAAR,CAAYC,oBAAZ,GAAmCV;AAhB3C;AAAA;AAAA;AAAA;AAAA,aADF,eAmBE,QAAC,cAAD;AAAgB,MAAA,KAAK,EAAEG;AAAvB;AAAA;AAAA;AAAA;AAAA,aAnBF,eAoBE,QAAC,cAAD;AAAgB,MAAA,cAAc,EAAET;AAAhC;AAAA;AAAA;AAAA;AAAA,aApBF;AAAA,kBADF;AAyBF,sBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA,4BACE,QAAC,GAAD;AACE,MAAA,KAAK,EAAES,cADT;AAEE,MAAA,WAAW,EACTN,qBAAqB,IAAIT,mBAAmB,CAACO,MAAD,CAHhD;AAKE,MAAA,WAAW,EAAE,CACX;AACES,QAAAA,KAAK,EAAEjB,SAAS,CAACQ,MAAD,CAAT,CAAiCW,SAAjC,CAA2CC,cADpD;AAEEL,QAAAA,IAAI,EAAEf,SAAS,CAACQ,MAAD,CAAT,CAAiCW,SAAjC,CAA2CJ;AAFnD,OADW,EAKX;AACEE,QAAAA,KAAK,EAAED,cADT;AAEED,QAAAA,IAAI,EAAEF;AAFR,OALW,CALf;AAeE,MAAA,IAAI,EAAEL,MAfR;AAgBE,MAAA,IAAI,EAAEa,OAAO,CAACC,GAAR,CAAYC,oBAAZ,GAAmCV;AAhB3C;AAAA;AAAA;AAAA;AAAA,aADF,eAmBE,QAAC,cAAD;AAAgB,MAAA,KAAK,EAAEG;AAAvB;AAAA;AAAA;AAAA;AAAA,aAnBF,eAoBE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,6BACE,QAAC,SAAD;AAAW,QAAA,KAAK,EAAEV,KAAlB;AAAyB,QAAA,UAAU,EAAED;AAArC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aApBF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AA0BD,CAxED;;GAAMF,c;UAM8BT,S;;;KAN9BS,c;;AAkIN,eAAeA,cAAf","sourcesContent":["import { NextPage, GetServerSideProps } from 'next';\r\nimport { useRouter } from 'next/router';\r\n\r\nimport Error from '../_error';\r\n\r\nimport GoodsList from '../../src/components/Goods/GoodsList';\r\nimport GoodsListTitle from '../../src/components/Goods/GoodsListTitle';\r\nimport Seo from '../../src/components/Seo/Seo';\r\nimport SubCollections from '../../src/components/SubCollections/SubCollections';\r\n\r\nimport { ICollectionPageProps } from '../../src/pagesTypes';\r\nimport {\r\n  ICockpitCategoriesEntries,\r\n  ICockpitGoodsEntries,\r\n} from '../../src/cockpitTypes';\r\n\r\nimport { getCockpitCollection } from '../../src/utils/getCockpitData';\r\n\r\nimport { SEO_ITEMS, DEFAULT_DESCRIPTION } from '../../src/constants/seoItems';\r\nimport { LANGUAGES } from '../../src/constants/languages';\r\n\r\nconst CollectionPage: NextPage<ICollectionPageProps> = ({\r\n  collection,\r\n  categories,\r\n  goods,\r\n  subCollections,\r\n}) => {\r\n  const { locale, defaultLocale } = useRouter();\r\n\r\n  if (!collection) return <Error />;\r\n\r\n  const collectionDescription =\r\n    locale === defaultLocale\r\n      ? collection.description\r\n      : collection.description_en;\r\n\r\n  const collectionLink =\r\n    LANGUAGES[locale as 'ru' | 'en'].path + '/collections' + collection.link;\r\n  const collectionName =\r\n    locale === defaultLocale ? collection.title : collection.title_en;\r\n\r\n  if (subCollections)\r\n    return (\r\n      <>\r\n        <Seo\r\n          title={collectionName}\r\n          description={\r\n            collectionDescription || DEFAULT_DESCRIPTION[locale as 'ru' | 'en']\r\n          }\r\n          breadcrumbs={[\r\n            {\r\n              title: SEO_ITEMS[locale as 'ru' | 'en'].indexPage.breadcrumbName,\r\n              link: SEO_ITEMS[locale as 'ru' | 'en'].indexPage.link,\r\n            },\r\n            {\r\n              title: collectionName,\r\n              link: collectionLink,\r\n            },\r\n          ]}\r\n          lang={locale as 'ru' | 'en'}\r\n          path={process.env.NEXT_PUBLIC_SITE_URL + collectionLink}\r\n        />\r\n        <GoodsListTitle title={collectionName} />\r\n        <SubCollections subCollections={subCollections} />\r\n      </>\r\n    );\r\n\r\n  return (\r\n    <div className=\"collection-page\">\r\n      <Seo\r\n        title={collectionName}\r\n        description={\r\n          collectionDescription || DEFAULT_DESCRIPTION[locale as 'ru' | 'en']\r\n        }\r\n        breadcrumbs={[\r\n          {\r\n            title: SEO_ITEMS[locale as 'ru' | 'en'].indexPage.breadcrumbName,\r\n            link: SEO_ITEMS[locale as 'ru' | 'en'].indexPage.link,\r\n          },\r\n          {\r\n            title: collectionName,\r\n            link: collectionLink,\r\n          },\r\n        ]}\r\n        lang={locale as 'ru' | 'en'}\r\n        path={process.env.NEXT_PUBLIC_SITE_URL + collectionLink}\r\n      />\r\n      <GoodsListTitle title={collectionName} />\r\n      <div className=\"goods-container\">\r\n        <GoodsList goods={goods} categories={categories} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps: GetServerSideProps = async ({\r\n  query: { collection },\r\n  locale,\r\n  defaultLocale,\r\n}) => {\r\n  const collections = await getCockpitCollection(\r\n    'Collections',\r\n    'filter[link]=/' + collection\r\n  );\r\n  const curCollection = collections.total ? collections.entries[0] : null;\r\n\r\n  const subCollections = curCollection\r\n    ? await getCockpitCollection(\r\n        'SubCollections',\r\n        'filter[collection._id]=' + curCollection._id\r\n      )\r\n    : null;\r\n\r\n  const cockpitGoodsData: ICockpitGoodsEntries = await getCockpitCollection(\r\n    'Goods',\r\n    `filter[collection._id]=${curCollection._id}&sort[order]=-1`\r\n  );\r\n\r\n  const cockpitCategoriesData: ICockpitCategoriesEntries = await getCockpitCollection(\r\n    'Categories'\r\n  );\r\n\r\n  const goods = cockpitGoodsData.entries\r\n    .map((good) => ({\r\n      ...good,\r\n      title: locale === defaultLocale ? good.title : good.title_en,\r\n    }))\r\n    .filter(({ isVisible }) => isVisible !== false);\r\n  // .sort((a, b) => (a.order > b.order ? 1 : -1));\r\n\r\n  const categories = cockpitCategoriesData.entries.map((category) => ({\r\n    ...category,\r\n    title: locale === defaultLocale ? category.title : category.title_en,\r\n  }));\r\n\r\n  const curSubCollections = subCollections?.total\r\n    ? subCollections.entries\r\n    : null;\r\n\r\n  return {\r\n    props: {\r\n      collection: curCollection,\r\n      subCollections: curSubCollections,\r\n      categories,\r\n      goods: {\r\n        entries: goods,\r\n      },\r\n    },\r\n  };\r\n};\r\n\r\nexport default CollectionPage;\r\n"]},"metadata":{},"sourceType":"module"}