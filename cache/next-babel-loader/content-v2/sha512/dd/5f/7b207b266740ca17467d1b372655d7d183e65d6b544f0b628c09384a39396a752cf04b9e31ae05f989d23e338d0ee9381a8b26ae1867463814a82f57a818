{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport Fuse from 'fuse.js';\nimport useCockpit from '../../hooks/useCockpit';\nimport GoodsSearchItem from '../Goods/GoodsSearchItem';\nimport { TRANSLATE } from '../../constants/languages';\n\nconst SearchInput = ({\n  close\n}) => {\n  const {\n    locale,\n    defaultLocale\n  } = useRouter();\n  const {\n    0: searchValue,\n    1: setSearchValue\n  } = useState('');\n  const {\n    0: foundGoods,\n    1: setFoundGoods\n  } = useState([]);\n  const {\n    data: goods\n  } = useCockpit(false);\n  const goodsList = goods === null || goods === void 0 ? void 0 : goods.entries;\n  const options = {\n    includeScore: true,\n    keys: ['title', 'title_en']\n  };\n  const fuse = new Fuse(goodsList, options);\n  useEffect(() => {\n    if (goodsList) setFoundGoods(fuse.search(searchValue).map(result => result.item));\n  }, [searchValue, goodsList]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"search-input-container\",\n    children: [/*#__PURE__*/_jsx(\"input\", {\n      type: \"text\",\n      className: \"search-input\",\n      value: searchValue,\n      placeholder: TRANSLATE[locale].search,\n      onChange: e => setSearchValue(e.target.value)\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      role: \"presentation\",\n      onClick: () => {\n        setSearchValue('');\n        close && close();\n      },\n      className: \"search-result-container\",\n      children: [searchValue && !foundGoods.length && /*#__PURE__*/_jsxs(\"p\", {\n        className: \"not-found\",\n        children: [TRANSLATE[locale].goodsNotFound[0], ` \"${searchValue}\" `, TRANSLATE[locale].goodsNotFound[1]]\n      }), foundGoods.map(({\n        _id,\n        previewImage,\n        title,\n        title_en,\n        link,\n        stockPrice,\n        price\n      }) => /*#__PURE__*/_jsx(GoodsSearchItem, {\n        photo: previewImage.path,\n        title: locale === defaultLocale ? title : title_en,\n        link: link,\n        price: stockPrice ? stockPrice : price\n      }, _id))]\n    })]\n  });\n};\n\nexport default SearchInput;","map":null,"metadata":{},"sourceType":"module"}